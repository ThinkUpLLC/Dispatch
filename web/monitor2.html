<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Queue Status/Monitor</title>

  <style type="text/css">
      .error { color: red}
  </style>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  <script src="/lib/underscore-1.4.4.js"></script>
  <script src="/lib/backbone-1.0.js"></script>
  
  <script type="text/javascript">
  // global vars
  var root_url = '/monitor.php?auth_token=0000000000';
  </script>

</head>
<body>

  
<div id="error-container"></div>
<div id="queue-status"></div>

<div id="crawl-statuses-form"><form id="install-filter">filter by install name<input id="install-name" type="text"></form></div>

<div id="crawl-statuses"></div>

<!-- our queue status views -->
<script src="/js/views/QueueStatusViews.js" type="text/javascript"></script>

<!-- our queue status models  -->
<script src="/js/models/QueueStatusModels.js" type="text/javascript"></script>

<!-- our queue status models  -->
<script src="/js/controller/QueueStatusController.js" type="text/javascript"></script>

<!-- queue status templates -->
<script type="text/template" id="request-fail">
    <span class="error">We are unable to process queue status request</span>
</script>

<script type="text/template" id="queue-fail">
    <span class="error">The Dispatch Queue does not appear to be running</span>
</script>

<script type="text/template" id="worker-fail">
    <span class="error">There are not enough Dispatch Workers running. Currently running '<%= running %>', and should be running '<%= wanted %>'</span>
</script>

<script type="text/template" id="queue-ok">
    <span>Queue Services are Up</span>
    <ul>
    <li>Connected Workers: <%= workers %></li>
    <li>Workers Running: <%= running %></li>
</script>

<script type="text/template" id="crawl-status">
    <span><%= install_name %></span>
    <span><%= crawl_status %></span>
    <span><%= crawl_time %></span>
    <span><%= crawl_start %></span>
    <span><%= crawl_finish %></span>
    <span><%= crawl_finish %></span>
    <span><a href="#<%= id %>" class="log-link">log</a></span>
</script>

</body>
</html>